
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-16DD2138-617F-57EA-9A35-70155AA7F7D1.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:01:42 GMT -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="copyright" content="(C) Copyright 2012" /><meta name="DC.rights.owner" content="(C) Copyright 2012" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Cleanup Support Example Code" /><meta name="abstract" content="Example codes that explain how to use various cleanup functions." /><meta name="description" content="Example codes that explain how to use various cleanup functions." /><meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7" /><meta name="DC.Relation" scheme="URI" content="GUID-E3D2A6ED-8192-563D-8966-DD96B3AF1783" /><meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87" /><meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D" /><meta name="DC.Relation" scheme="URI" content="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="GUID-16DD2138-617F-57EA-9A35-70155AA7F7D1" /><meta name="DC.Language" content="en" /><title>Cleanup Support Example Code </title><link href="css/s60/style.css" rel="stylesheet" type="text/css" /><link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp5.html" rel="stylesheet" type="text/css" /></head><body><div class="body"><div class="contentLeft prTxt"><h1 class="pageHeading" id="GUID-16DD2138-617F-57EA-9A35-70155AA7F7D1">Cleanup Support Example Code</h1><div><p>Example codes that explain how to use various cleanup functions.</p>
<ul>
<li id="GUID-30B853A0-380E-5355-9D3C-F854BC77924D"><a name="GUID-30B853A0-380E-5355-9D3C-F854BC77924D"><!-- --></a><p> <a href="#GUID-9CAE0C86-537A-500F-B361-D555DD39954B">ErrorOnFail: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-21C594C4-57D2-56E1-88B9-2A9F37F2EFA6"><a name="GUID-21C594C4-57D2-56E1-88B9-2A9F37F2EFA6"><!-- --></a><p> <a href="#GUID-E80C29CC-0282-5350-8077-BB298B7590C0">LeaveOnFail: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-D6653D68-E236-5C53-A07B-E72EAAC85F23"><a name="GUID-D6653D68-E236-5C53-A07B-E72EAAC85F23"><!-- --></a><p> <a href="#GUID-279FBD9A-0E61-50ED-9618-BAB24AC3163C">ELeaveOnFail: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-79C5A5BB-2A14-5148-9C17-7FE508BC7D17"><a name="GUID-79C5A5BB-2A14-5148-9C17-7FE508BC7D17"><!-- --></a><p> <a href="#GUID-C7E94BD9-9B77-548C-A3C2-D5A396F20EF0">TrapD: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-024B1B3E-19A5-5494-B382-482576A27E3E"><a name="GUID-024B1B3E-19A5-5494-B382-482576A27E3E"><!-- --></a><p> <a href="#GUID-12F30817-5CE0-5B6E-A850-7179BE915539">PushLAndPop: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-58BD5628-8D27-52D2-BFB3-9FBF5B6A97B9"><a name="GUID-58BD5628-8D27-52D2-BFB3-9FBF5B6A97B9"><!-- --></a><p> <a href="#GUID-548F79C2-3394-5D86-8E70-B219E49288C7">PushLPopDest: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-2F40CF99-E993-58D3-8C9E-517DB54BB237"><a name="GUID-2F40CF99-E993-58D3-8C9E-517DB54BB237"><!-- --></a><p> <a href="#GUID-5975C52F-726D-5DB1-8CE4-7F52DC202B43">NewL: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-9B4A5102-5C64-5E22-9D55-C6A53E48137A"><a name="GUID-9B4A5102-5C64-5E22-9D55-C6A53E48137A"><!-- --></a><p> <a href="#GUID-53F042FC-401F-5AD7-8F60-ECD15EB1069F">NewLC: cleanup, TRAPD and leaving</a> </p> </li>
<li id="GUID-1DE76860-6FA4-5AA2-9C9B-8C7DCE01F97A"><a name="GUID-1DE76860-6FA4-5AA2-9C9B-8C7DCE01F97A"><!-- --></a><p> <a href="#GUID-4559C2AC-0DA8-5788-A33C-2E20EFEF6D58">SimpleOOM—cleaning up compound classes</a> </p> </li>
<li id="GUID-94377071-3329-53C8-9EA2-ACFE90FB0413"><a name="GUID-94377071-3329-53C8-9EA2-ACFE90FB0413"><!-- --></a><p> <a href="#GUID-2E3E6224-BE1C-5DA1-BEA0-D28CD7DA40E8">MemLeakOOM: cleaning up compound classes</a> </p> </li>
<li id="GUID-D099EA48-EC8D-5081-8A2F-E12FDB1B73F4"><a name="GUID-D099EA48-EC8D-5081-8A2F-E12FDB1B73F4"><!-- --></a><p> <a href="#GUID-068C17E6-0E3C-571B-92D1-421EEF42E6A0">TwoPhaseOOM: cleaning up compound classes</a> </p> </li>
<li id="GUID-2D4E0AA0-3768-5E0D-B4FA-0E376BDB71DE"><a name="GUID-2D4E0AA0-3768-5E0D-B4FA-0E376BDB71DE"><!-- --></a><p> <a href="#GUID-D0A1DF34-2499-5F7E-80D1-0BFF74882EA6">TAnyRObjects1: cleaning up TAny* and "R" type objects</a> </p> </li>
<li id="GUID-1EBC2006-351E-58EE-9611-98C260FD1A2C"><a name="GUID-1EBC2006-351E-58EE-9611-98C260FD1A2C"><!-- --></a><p> <a href="#GUID-C42BF40F-94C4-5845-B449-164AD4578691">TAnyRObjects2: cleaning up TAny* and "R" type objects</a> </p> </li>
<li id="GUID-EFAF518A-F1A7-5633-8CCA-2B3152F96919"><a name="GUID-EFAF518A-F1A7-5633-8CCA-2B3152F96919"><!-- --></a><p> <a href="#GUID-C4F81443-E41D-52C6-9305-A1B7E45A1DC5">Utilities: cleanup utilities</a>. </p> </li>
</ul>
<div id="GUID-9CAE0C86-537A-500F-B361-D555DD39954B"><h3 class="section-title">ErrorOnFail:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-2d7621ab-71a7-4a6f-bcd2-5c2e05888d00.zip" target="_blank">ErrorOnFail.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-2d7621ab-71a7-4a6f-bcd2-5c2e05888d00.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-2d7621ab-71a7-4a6f-bcd2-5c2e05888d00.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>The example attempts to construct an object, and on failure
it returns an appropriate error code. </p> <p>This example shows use
of the <code class="codeph">TRAPD</code> macro, the cleanup stack and its functions <code class="codeph">PushL()</code>, <code class="codeph">PopAndDestroy()</code> and the process
of leaving. It also uses the heap debugging macro <code class="codeph">__UHEAP_SETFAIL</code>. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-E80C29CC-0282-5350-8077-BB298B7590C0"><h3 class="section-title">LeaveOnFail:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-1e56dfe1-13ea-4e14-82b6-e7da3a8453f5.zip" target="_blank">LeaveOnFail.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-1e56dfe1-13ea-4e14-82b6-e7da3a8453f5.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-1e56dfe1-13ea-4e14-82b6-e7da3a8453f5.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>As with the <a href="#GUID-9CAE0C86-537A-500F-B361-D555DD39954B">ErrorOnFail</a> example, this example also attempts to construct
an object, however on failure it simply leaves. </p> <p>This example
shows use of the <code class="codeph">TRAPD</code> macro, the cleanup stack and
its functions <code class="codeph">PushL()</code>, <code class="codeph">PopAndDestroy()</code> and the process of leaving. It also uses the heap debugging macro <code class="codeph">__UHEAP_SETFAIL</code>. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-279FBD9A-0E61-50ED-9618-BAB24AC3163C"><h3 class="section-title">ELeaveOnFail:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-16210a7c-3129-4176-a062-2a08b9947caf.zip" target="_blank">ELeaveOnFail.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-16210a7c-3129-4176-a062-2a08b9947caf.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-16210a7c-3129-4176-a062-2a08b9947caf.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>This example attempts to construct an object using the overloaded <code class="codeph">new</code> operator <code class="codeph">new (ELeave)</code>. Specifying <code class="codeph">(ELeave)</code> will cause a leave to occur if it was unable to
allocate memory for the new object. </p> <p>This example shows use
of the <code class="codeph">TRAPD</code> macro, the cleanup stack and its functions <code class="codeph">PushL()</code>, <code class="codeph">PopAndDestroy()</code> and the process
of leaving. It also uses the heap debugging macro <code class="codeph">__UHEAP_SETFAIL</code>. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-C7E94BD9-9B77-548C-A3C2-D5A396F20EF0"><h3 class="section-title">TrapD:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-de1a3a49-8773-46c3-8469-be9777f09870.zip" target="_blank">TrapD.zip</a></p><p>click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-de1a3a49-8773-46c3-8469-be9777f09870.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-de1a3a49-8773-46c3-8469-be9777f09870.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>The example shows the use of the <code class="codeph">TRAPD</code> macro.
It shows how a newly created object can be protected by the <code class="codeph">TRAPD</code> macro. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-12F30817-5CE0-5B6E-A850-7179BE915539"><h3 class="section-title">PushLAndPop:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-50fd89b6-237a-4f9d-bed1-21678cc5ab5b.zip" target="_blank">PushLAndPop.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-50fd89b6-237a-4f9d-bed1-21678cc5ab5b.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-50fd89b6-237a-4f9d-bed1-21678cc5ab5b.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>The example shows the use of the cleanup stack and its functions <code class="codeph">PushL()</code> and <code class="codeph">Pop()</code>. </p> <p>The example also uses the heap debugging macro <code class="codeph">__UHEAP_SETFAIL.</code> </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-548F79C2-3394-5D86-8E70-B219E49288C7"><h3 class="section-title">PushLPopDest:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-03d19c0a-a64a-4e18-ba8c-7d563e6df331.zip" target="_blank">PushLPopDest.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-03d19c0a-a64a-4e18-ba8c-7d563e6df331.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-03d19c0a-a64a-4e18-ba8c-7d563e6df331.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>The example shows the use of the cleanup stack and its functions <code class="codeph">PushL()</code> and <code class="codeph">PopAndDestroy()</code>. </p> <p>The
example also uses the heap debugging macro <code class="codeph">__UHEAP_SETFAIL</code>. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-5975C52F-726D-5DB1-8CE4-7F52DC202B43"><h3 class="section-title">NewL:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-ed6e0d71-cada-4370-b55e-e7239e75b707.zip" target="_blank">NewL.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-ed6e0d71-cada-4370-b55e-e7239e75b707.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-ed6e0d71-cada-4370-b55e-e7239e75b707.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>The example shows use of the <code class="codeph">NewL()</code> static
function. </p> <p>The example also uses the heap debugging macro <code class="codeph">__UHEAP_SETFAIL</code>. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-53F042FC-401F-5AD7-8F60-ECD15EB1069F"><h3 class="section-title">NewLC:
cleanup, TRAPD and leaving</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-a3ff31ac-53a8-4719-aa9c-f45874214852.zip" target="_blank">NewLC.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-a3ff31ac-53a8-4719-aa9c-f45874214852.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-a3ff31ac-53a8-4719-aa9c-f45874214852.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>The example shows use of the <code class="codeph">NewLC()</code> static
function. </p> <p>The example also uses the heap debugging macro <code class="codeph">__UHEAP_SETFAIL</code>. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-4559C2AC-0DA8-5788-A33C-2E20EFEF6D58"><h3 class="section-title">SimpleOOM—cleaning
up compound classes</h3> <p><strong>Download</strong> </p> <p>Click on the
following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-71eeb97f-c662-46cb-b5b8-aefd8aa4439e.zip" target="_blank">SimpleOOM.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-71eeb97f-c662-46cb-b5b8-aefd8aa4439e.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-71eeb97f-c662-46cb-b5b8-aefd8aa4439e.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>This example shows cleanup handling for compound classes.
The robustness of a simple class on Out Of Memory (OOM) is tested. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-2E3E6224-BE1C-5DA1-BEA0-D28CD7DA40E8"><h3 class="section-title">MemLeakOOM:
cleaning up compound classes</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-873c620d-c7f2-48f5-9472-2ad61a5c7594.zip" target="_blank">MemLeakOOM.zip</a></p><p>Click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-873c620d-c7f2-48f5-9472-2ad61a5c7594.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-873c620d-c7f2-48f5-9472-2ad61a5c7594.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>This example shows cleanup handling for compound classes.
The robustness of a compound class on Out Of Memory (OOM) is tested.
It also shows how memory leaks can occur. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-068C17E6-0E3C-571B-92D1-421EEF42E6A0"><h3 class="section-title">TwoPhaseOOM:
cleaning up compound classes</h3> <p><strong>Download</strong> </p> <p>Click
on the following link to download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-77965fa6-4624-42dc-8104-dd973dff7132.zip" target="_blank">TwoPhaseOOM.zip</a></p><p>click: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-77965fa6-4624-42dc-8104-dd973dff7132.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-77965fa6-4624-42dc-8104-dd973dff7132.html">browse </a>to view the example code.</p> <p><strong>Description</strong> </p> <p>These examples show cleanup handling for compound classes.
The robustness of a compound class on Out Of Memory (OOM) is tested.
It also shows the use of the two phase construction technique. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
<div id="GUID-D0A1DF34-2499-5F7E-80D1-0BFF74882EA6"><h3 class="section-title">TAnyRObjects1:
cleaning up TAny* and ‘R’ type objects</h3> <p><strong>Download</strong> </p> <p>Download the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-4aeb7aba-6ce4-4ec4-bc80-04722c55fd73.zip" target="_blank">TAnyRObjects1.zip</a> </p><p>Download some additional
files required by the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.zip" target="_blank">CommonFramework.zip</a> , <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-306f220f-1980-4b1c-914e-d643a49f9d97.zip" target="_blank">HeaderFile.zip</a></p><p>View the source code: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4aeb7aba-6ce4-4ec4-bc80-04722c55fd73.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4aeb7aba-6ce4-4ec4-bc80-04722c55fd73.html">browse</a> . View the additional files:<a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.html">CommonFramework</a> , <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-306f220f-1980-4b1c-914e-d643a49f9d97.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-306f220f-1980-4b1c-914e-d643a49f9d97.html">HeaderFile</a></p> <p><strong>Description</strong> </p> <p>The
example shows how cleanup can be implemented for <code class="codeph">TAny*</code> type objects and 'R' type (resource type) objects. </p> <p>This
example shows the use of <code class="codeph">TAny*</code> cleanup type, for
pushing a buffer to the cleanup stack. The buffer data is read from
a file. </p> <p>Class <code>RFileWithCleanup</code> is derived
from class <code>RFile</code>, to show how to add cleanup
support to a general <code>R</code> class. </p> <p>This example
adds cleanup support to the <code>RFile</code>. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
<li><p>RFile</p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example writes files to
the executable's process private directory on the writable drive: <code>\private\0FFFFF01\</code>. </p> <p>The second UID in the <code>.mmp</code> file is defined as <code class="codeph">0x0FFFFF01</code> and
this is used as the secure ID on which the name of the private directory
is based. </p> </div>
<div id="GUID-C42BF40F-94C4-5845-B449-164AD4578691"><h3 class="section-title">TAnyRObjects2:
cleaning up TAny* and ‘R’ type objects</h3> <p><strong>Download</strong> </p> <p>Download the example:<a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-2a8a3745-6fc5-4b7e-bceb-c975b9126318.zip" target="_blank">TAnyRObjects2.zip</a> </p><p>Download some additional
files required by the example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.zip" target="_blank">CommonFramework.zip</a> , <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-306f220f-1980-4b1c-914e-d643a49f9d97.zip" target="_blank">HeaderFile.zip</a></p><p>View the source code: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-2a8a3745-6fc5-4b7e-bceb-c975b9126318.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-2a8a3745-6fc5-4b7e-bceb-c975b9126318.html">browse</a> . View the additional files: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.html">CommonFramework</a> , <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-306f220f-1980-4b1c-914e-d643a49f9d97.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-306f220f-1980-4b1c-914e-d643a49f9d97.html">HeaderFile</a>.</p> <p><strong>Description</strong> </p> <p>The example shows how cleanup can be implemented for <code class="codeph">TAny</code> * type objects and 'R' type (resource type) objects. </p> <p>This
example is similar to the <a href="#GUID-D0A1DF34-2499-5F7E-80D1-0BFF74882EA6">TAnyRObjects1</a> example. However, it enhances the interface
to include an <code class="codeph">OpenLC()</code> which opens the file, and
pushes it on to the cleanup stack in one function call. </p><p><strong>Class summary</strong></p><ul>
<li><p><a href="GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html#GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-0DD554D7-B9B1-3FD3-898F-4D855144FCEA.html"><code class="apiname">CleanupStack</code></a></p></li>
<li><p>RFile</p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example writes files to
the executable's process private directory: <code>C:\private\0FFFFF02\</code>. </p> <p>The second UID in the <code>.mmp</code> file is
defined as <code class="codeph">0x0FFFFF02</code> and this is used as the secure
ID on which the name of the private directory is based. </p> </div>
<div id="GUID-C4F81443-E41D-52C6-9305-A1B7E45A1DC5"><h3 class="section-title">Utilities:
cleanup utilities</h3> <p><strong>Download</strong> </p> <p>Download the
example: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-cd5a50ad-f191-4f0f-a266-a76d1d633092.zip" target="_blank">Utilities.zip</a></p><p><a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/zips/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.zip" target="_blank">CommonFramework.zip</a>.</p><p>View the source
code: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-cd5a50ad-f191-4f0f-a266-a76d1d633092.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-cd5a50ad-f191-4f0f-a266-a76d1d633092.html">browse</a>.  View the additional file: <a href="GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.html#GUID-6013A680-57F9-415B-8851-C4FA63356636/guid-4184e6d4-8dbe-4267-b1a3-8737c8bf64ce.html">browse</a></p> <p><strong>Description</strong> </p> <p>This
example shows how the cleanup utilities (the templated functions <code class="codeph">CleanupDeletePushL()</code>, <code class="codeph">CleanupClosePushL()</code> and <code class="codeph">CleanupReleasePushL()</code>, and <code class="codeph">CleanupArrayDeletePushL()</code>) can be used. </p><p><strong>Class summary</strong></p><p> In addition to
the templated functions:</p><ul>
<li><p>CleanupDeletePushL()</p></li>
<li><p> CleanupClosePushL() </p></li>
<li><p>CleanupReleasePushL() </p></li>
<li><p> CleanupArrayDeletePushL()</p></li>
</ul><p>the examples implicitly use the templated classes:</p><p>Examples
of APIs</p><ul>
<li><p>CleanupDelete&lt;class T&gt;</p></li>
<li><p>CleanupClose&lt;class T&gt;</p></li>
<li><p>CleanupRelease&lt;class T&gt;</p></li>
<li><p>CleanupArrayDelete&lt;class T&gt;</p></li>
</ul> <p><strong>Security issues</strong> </p> <p>The example requires no specific
capabilities in order to run - and does not demonstrate any security
issues. </p> </div>
</div></div></div><div class="footer"><p class="metadata">Last updated August 11th, 2011</p><hr /><div class="copy">© Nokia 2012.</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-16DD2138-617F-57EA-9A35-70155AA7F7D1.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:01:52 GMT -->
</html>