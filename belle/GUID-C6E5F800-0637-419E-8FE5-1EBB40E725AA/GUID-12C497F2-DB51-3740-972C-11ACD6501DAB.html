<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:40 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta name="DC.Type" content="cxxClass" />
<meta name="DC.Title" content="CHeartbeat" />
<meta name="abstract" content="" />
<meta name="description" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB" />
<title>CHeartbeat</title>
<meta name="keywords" content="api" /><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css" />
<link href="css/s60/style.css" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp3.html" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category-cover_cpp3.html" rel="stylesheet" type="text/css" /></head>
<body id="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB"><a name="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB"><!-- --></a><div class="body"><div class="contentLeft prTxt">
<h1 class="sectiontitle">CHeartbeat Class Reference</h1>
<div class="state state apiQualifier apiQualifier cxxClassDeclarationFile section include"><p>#include 
            
                    &lt;e32base.h&gt;
                </p></div>
<div class="section signature"><table class="signature"><tr><td>class CHeartbeat : public CTimer</td></tr></table></div><div class="ph ph apiDefItem apiDefItem cxxClassDerivations section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CHeartbeat<ul class="derivation"><li class="derivation-depth-1 "><a class="xref xref apiRelation apiBaseClassifier cxxClassBaseClass" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer</a><ul class="derivation"><li class="derivation-depth-2 "><a class="xref xref apiRelation apiBaseClassifier cxxClassBaseClass" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive</a><ul class="derivation"><li class="derivation-depth-3 "><a class="xref xref apiRelation apiBaseClassifier cxxClassBaseClass" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li></ul></li></ul></li></ul></li></ul></div>
<div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"></td><td><a href="#GUID-CBC87E5B-2052-37B3-BB55-CB60750B1199">~CHeartbeat</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html">CHeartbeat</a> *</td><td><a href="#GUID-CE22EACA-1B4D-3589-998E-7012BC019404">New</a>(<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr><td align="right" class="code">IMPORT_C <a class="xref xref apiRelation" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html">CHeartbeat</a> *</td><td><a href="#GUID-7CE8E4AA-75BC-334B-BCC9-D71681657AE0">NewL</a>(<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-6E5622E8-CB26-3F86-A26F-7D23689D2CDA">Start</a>(<a class="xref xref apiRelation" href="GUID-83B95166-7DF5-3D6B-B790-F0D5AE3AA08C.html">TTimerLockSpec</a>, <a class="xref xref apiRelation" href="GUID-6DE7027A-54C0-33F1-B184-7070B1A85709.html">MBeating</a> *)</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"></td><td><a href="#GUID-F08C8ABF-7DE0-3266-AC5B-6BD518553BCE">CHeartbeat</a>(<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr class="bg"><td align="right" class="code">virtual IMPORT_C void</td><td><a href="#GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4">RunL</a>()</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Attributes</th></tr></thead><tbody><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassVariableInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::iStatus</a></td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Enumerations</th></tr></thead><tbody><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassEnumerationInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive:TPriority</a></td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::CActive(TInt)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Cancel()</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Deque()</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::IsActive()const</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::IsAdded()const</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::Priority()const</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::RunError(TInt)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::SetActive()</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::SetPriority(TInt)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::~CActive()</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::After(TTimeIntervalMicroSeconds32)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::At(const TTime &amp;)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::AtUTC(const TTime &amp;)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::CTimer(TInt)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::ConstructL()</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::DoCancel()</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::HighRes(TTimeIntervalMicroSeconds32)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::Inactivity(TTimeIntervalSeconds)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::Lock(TTimerLockSpec)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html">CTimer::~CTimer()</a></td></tr></tbody></table></div><div class="section section apiDesc section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
<p class="p">Heatbeat timer.</p>
<p class="p">This class generates regular heartbeat events on a fixed fraction of a second. It is more accurate than a <a class="xref" href="GUID-3CECC9FC-58C1-3117-AAF2-FDF88341F56F.html#GUID-3CECC9FC-58C1-3117-AAF2-FDF88341F56F">CPeriodic</a> timer, because it provides a function to restore timer accuracy if it gets out of synchronisation with the system clock.</p>
<p class="p">The protected <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4">RunL()</a> function is called when the timer completes. The <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4">RunL()</a> function in turn calls either the <a class="xref" href="GUID-6DE7027A-54C0-33F1-B184-7070B1A85709.html#GUID-9DD4288E-8F0F-3C0B-8A35-05D53400C3E3">MBeating::Beat()</a> or the <a class="xref" href="GUID-6DE7027A-54C0-33F1-B184-7070B1A85709.html#GUID-1D2A71E2-2254-3FC1-8C0F-EFC330532574">MBeating::Synchronize()</a> functions; <a class="xref" href="GUID-6DE7027A-54C0-33F1-B184-7070B1A85709.html#GUID-6DE7027A-54C0-33F1-B184-7070B1A85709">MBeating</a> is specified as a parameter to the <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-6E5622E8-CB26-3F86-A26F-7D23689D2CDA">Start()</a> function used to start the heartbeat timer.</p>
<p class="p">The relevant <a class="xref" href="GUID-6DE7027A-54C0-33F1-B184-7070B1A85709.html#GUID-6DE7027A-54C0-33F1-B184-7070B1A85709">MBeating</a> function may not be called immediately after the signal from the timer request has been generated, for the following reasons:</p>
<p class="p">1. the <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4">RunL()</a> of another active object may be running at the time of the signal</p>
<p class="p">2. other active objects may have a higher priority than the <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a></p>
<p class="p">If no heartbeat is missed, then the Beat() function is called.</p>
<p class="p">If one or more heartbeats are missed then the Synchronize() function is called. It is important to bear in mind that the machine might be switched off after a few beats of the heart, and then Synchronize() will be called several days later. It is therefore essential that synchronisation is achieved as quickly as possible, rather than trying to catch up a tick at a time. In the context of an analogue clock, for instance, the clock should just redraw itself with the current time - rather than moving the hands round in steps until the time is correct.</p>
<p class="p">
<a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a> is an active object, derived from <a class="xref" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html#GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F">CActive</a> (via <a class="xref" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html#GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A">CTimer</a>). You should be familiar with <a class="xref" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html#GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F">CActive</a> in order to understand <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a> behaviour, but not necessarily with <a class="xref" href="GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A.html#GUID-5733DF34-5B54-3044-BBED-3BFECB7ACE7A">CTimer</a>.</p>
<p class="p">
</p><p class="p">See also: <a class="xref" href="GUID-6DE7027A-54C0-33F1-B184-7070B1A85709.html#GUID-6DE7027A-54C0-33F1-B184-7070B1A85709">MBeating</a> </p>
</div>
<h2 class="sectiontitle">Constructor &amp; Destructor Documentation</h2><div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-F08C8ABF-7DE0-3266-AC5B-6BD518553BCE"><a name="GUID-F08C8ABF-7DE0-3266-AC5B-6BD518553BCE"><!-- --></a>
<a name="GUID-ACC82714-4284-3022-9E8A-24AF74E0579B"><!-- --></a><h3 class="sectiontitle">CHeartbeat ( TInt )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>CHeartbeat</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aPriority</span></td><td>)</td><td>[protected]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Protected constructor with a priority. Use this constructor to set the priority of the active object.</p>
<p class="p">Classes derived from <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a> must define and provide a constructor through which the priority of the active object can be passed. Such a constructor can call <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a>'s constructor in its constructor initialisation list.</p>
<p class="p">
</p></div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aPriority</td><td>The priority of the timer.  </td></tr></table></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-CBC87E5B-2052-37B3-BB55-CB60750B1199"><a name="GUID-CBC87E5B-2052-37B3-BB55-CB60750B1199"><!-- --></a>
<h3 class="sectiontitle">~CHeartbeat (  )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C</td><td>~CHeartbeat</td><td>(</td><td>)</td><td></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Destructor.</p>
<p class="p">Frees resources prior to destruction. </p>
</div>
</div>
</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-CE22EACA-1B4D-3589-998E-7012BC019404"><a name="GUID-CE22EACA-1B4D-3589-998E-7012BC019404"><!-- --></a>
<a name="GUID-05342BB5-CBAD-3958-BF02-4D7B89D9AEAB"><!-- --></a><h3 class="sectiontitle">New ( TInt )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html">CHeartbeat</a> *</td><td>New</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aPriority</span></td><td>)</td><td>[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Allocates and constructs a <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a> object - non-leaving.</p>
<p class="p">Specify a high priority so the callback function is scheduled as soon as possible after the timer events complete.</p>
<p class="p">
</p></div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aPriority</td><td>The priority of the active object. If timing is critical, it should be higher than that of all other active objects owned by the scheduler. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Pointer to new CHeartbeat object. The object is initialised and added to the active scheduler. This value is NULL if insufficient memory was available. </dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-7CE8E4AA-75BC-334B-BCC9-D71681657AE0"><a name="GUID-7CE8E4AA-75BC-334B-BCC9-D71681657AE0"><!-- --></a>
<a name="GUID-33F2C49D-0A77-340B-9685-6F7B927E75C5"><!-- --></a><h3 class="sectiontitle">NewL ( TInt )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C <a class="xref xref apiRelation" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html">CHeartbeat</a> *</td><td>NewL</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aPriority</span></td><td>)</td><td>[static]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Allocates and constructs a <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a> object - leaving.</p>
<p class="p">Specify a high priority so the callback function is scheduled as soon as possible after the timer events complete.</p>
<p class="p">
</p></div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aPriority</td><td>The priority of the active object. If timing is critical, it should be higher than that of all other active objects owned by the scheduler. </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Pointer to new CHeartbeat object. The object is initialised and added to the active scheduler. </dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4"><a name="GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4"><!-- --></a>
<h3 class="sectiontitle">RunL (  )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>RunL</td><td>(</td><td>)</td><td>[protected, virtual]</td></tr></table></div><div><p>Reimplemented from <a class="xref xref apiRelation apiRelation cxxFunctionReimplemented" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html">CActive::RunL()</a></p></div><div class="section section apiDesc section apidesc">
<p class="p">Handles an active object's request completion event.</p>
<p class="p">A derived class must provide an implementation to handle the completed request. If appropriate, it may issue another request.</p>
<p class="p">The function is called by the active scheduler when a request completion event occurs, i.e. after the active scheduler's WaitForAnyRequest() function completes.</p>
<p class="p">Before calling this active object's <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4">RunL()</a> function, the active scheduler has:</p>
<p class="p">1. decided that this is the highest priority active object with a completed request</p>
<p class="p">2. marked this active object's request as complete (i.e. the request is no longer outstanding)</p>
<p class="p">
<a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4">RunL()</a> runs under a trap harness in the active scheduler. If it leaves, then the active scheduler calls <a class="xref" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html#GUID-49FE8001-39DC-389F-851D-44C74BCE55D2">RunError()</a> to handle the leave.</p>
<p class="p">Note that once the active scheduler's <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-6E5622E8-CB26-3F86-A26F-7D23689D2CDA">Start()</a> function has been called, all user code is run under one of the program's active object's <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-3F5F1480-FFFE-3276-97B0-D8DED04622E4">RunL()</a> or <a class="xref" href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html#GUID-49FE8001-39DC-389F-851D-44C74BCE55D2">RunError()</a> functions.</p>
<p class="p">
</p><p class="p">See also: <a class="xref" href="GUID-B4C76104-EA1B-3FC3-A31E-86A976598171.html#GUID-3281C85C-1A45-3049-B711-64CA8BFBC452">CActiveScheduler::Start</a> <a class="xref" href="GUID-B4C76104-EA1B-3FC3-A31E-86A976598171.html#GUID-C081C83E-D7DB-37FC-B902-2E210FFE45F8">CActiveScheduler::Error</a> <a class="xref" href="GUID-B4C76104-EA1B-3FC3-A31E-86A976598171.html#GUID-01A006BB-9973-31EF-9409-CA7F83E0B721">CActiveScheduler::WaitForAnyRequest</a> <a class="xref" href="GUID-9692245D-DDBC-39F9-BFFB-EC9FFE4BB1AB.html#GUID-57895C34-AD00-35E1-9BF8-478653056383">TRAPD</a> </p>
</div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-6E5622E8-CB26-3F86-A26F-7D23689D2CDA"><a name="GUID-6E5622E8-CB26-3F86-A26F-7D23689D2CDA"><!-- --></a>
<a name="GUID-AEB8DF24-0ABF-38EE-A56E-23EC77304F2F"><!-- --></a><h3 class="sectiontitle">Start ( TTimerLockSpec, MBeating * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>IMPORT_C void</td><td>Start</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-83B95166-7DF5-3D6B-B790-F0D5AE3AA08C.html">TTimerLockSpec</a></td><td><span class="parameter">aLock</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-6DE7027A-54C0-33F1-B184-7070B1A85709.html">MBeating</a> *</td><td><span class="parameter">aBeating</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"></td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Starts generating heartbeat events. The event results in calls to the Beat() and Synchronize() functions specified by aBeating.</p>
<p class="p">The first event is generated on the first fraction of a second corresponding to aLock that occurs after <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-6E5622E8-CB26-3F86-A26F-7D23689D2CDA">Start()</a> has returned; subsequent events are generated regularly thereafter at one second intervals on the second fraction specified by aLock.</p>
<p class="p">The aBeating mixin must be written by the user. Most of the time, its Beat() function is called which trivially updates the tick count. Occasionally, synchronisation is lost, and the Synchronize() function is called instead: this must find out from the system time how many ticks should have been counted, and update things accordingly.</p>
<p class="p">Once started, heartbeat events are generated until the <a class="xref" href="GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html#GUID-12C497F2-DB51-3740-972C-11ACD6501DAB">CHeartbeat</a> object is destroyed.</p>
<p class="p">
</p></div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aLock</td><td>The fraction of a second at which the timer completes.  </td></tr><tr class="bg"><td class="parameter">aBeating</td><td>Provides the Beat() and Synchronize() functions.  </td></tr></table></div>
</div>
</div>
</div></div><div class="footer"><hr /><div class="copy">Â© Nokia 2005.</div></div>
</body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-12C497F2-DB51-3740-972C-11ACD6501DAB.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:40 GMT -->
</html>