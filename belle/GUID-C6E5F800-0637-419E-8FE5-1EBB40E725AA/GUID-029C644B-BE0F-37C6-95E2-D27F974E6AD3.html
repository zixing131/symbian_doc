<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:36 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta name="DC.Type" content="cxxClass" />
<meta name="DC.Title" content="CAnim" />
<meta name="abstract" content="" />
<meta name="description" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3" />
<title>CAnim</title>
<meta name="keywords" content="api" /><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css" />
<link href="css/s60/style.css" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category_cpp3.html" rel="stylesheet" type="text/css" />
<link href="PLUGINS_ROOT/com.nokia.forum.library/css/category-cover_cpp3.html" rel="stylesheet" type="text/css" /></head>
<body id="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3"><a name="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3"><!-- --></a><div class="body"><div class="contentLeft prTxt">
<h1 class="sectiontitle">CAnim Class Reference</h1>
<div class="state state apiQualifier apiQualifier cxxClassDeclarationFile section include"><p>#include 
            
                    &lt;w32adll.h&gt;
                </p></div>
<div class="section signature"><table class="signature"><tr><td>class CAnim : public CBase, public MEventHandler</td></tr></table></div><div class="ph ph apiDefItem apiDefItem cxxClassDerivations section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CAnim<ul class="derivation"><li class="derivation-depth-1 derivation-has-next"><a class="xref xref apiRelation apiBaseClassifier cxxClassBaseClass" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li><li class="derivation-depth-1 "><a class="xref xref apiRelation apiBaseClassifier cxxClassBaseClass" href="GUID-F1B47E38-4585-3903-93C7-0BCB075465AA.html">MEventHandler</a></li></ul></li></ul></div>
<div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Protected Attributes</th></tr></thead><tbody><tr><td align="right" valign="top" class="code">
<a class="xref xref apiRelation" href="GUID-FFE76181-A701-374B-82AA-CEACC5856E91.html">MAnimGeneralFunctions</a> *</td><td><a href="#GUID-84AC5A03-BDA6-3282-92D3-9CE06AF02F90">iFunctions</a></td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">pure virtual void</td><td><a href="#GUID-3207DDE3-CE9A-3F90-958A-736130F37A7E">Animate</a>(<a class="xref xref apiRelation" href="GUID-13A9DD2B-8ABC-3D62-B54E-4F5DD5B9228B.html">TDateTime</a> *)</td></tr><tr class="bg"><td align="right" class="code">pure virtual void</td><td><a href="#GUID-0D7C17A5-59CB-3717-999A-3C98AC9CDD72">Command</a>(<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *)</td></tr><tr><td align="right" class="code">pure virtual 
					<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
</td><td><a href="#GUID-4454A273-9E6D-3B58-92C6-D2638628FFB2">CommandReplyL</a>(<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *)</td></tr><tr class="bg"><td align="right" class="code">virtual void</td><td><a href="#GUID-16B8AE30-48D8-3B57-A75D-C9CBDEBCF034">HandleNotification</a>(const <a class="xref xref apiRelation" href="GUID-5D0B1595-1AC7-3C44-AC6B-0EFB5EABCF31.html">TWsEvent</a> &amp;)</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr><tr class="bg"><td> </td><td><a class="xref xref apiRelation apiRelation cxxClassFunctionInherited" href="GUID-F1B47E38-4585-3903-93C7-0BCB075465AA.html">MEventHandler::OfferRawEvent(const TRawEvent &amp;)</a></td></tr></tbody></table></div><div class="section section apiDesc section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
<p class="p">Server side animated object base interface.</p>
<p class="p">Animations implement this interface, which is called by the window server to pass commands from clients, perform a step in the animation, or to pass window server events (if required) so that the animation can handle them before the application.</p>
<p class="p">The functions are all pure virtual, and must be implemented in the derived class to provide server side behaviour. The functions will be called by the window server with optional arguments passed in from the client side animation class <a class="xref" href="GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10.html#GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10">RAnim</a>.</p>
<p class="p">You should derive from <a class="xref" href="GUID-70AB2433-00C7-3E49-BD6A-CC90E20DA7AE.html#GUID-70AB2433-00C7-3E49-BD6A-CC90E20DA7AE">CWindowAnim</a>, <a class="xref" href="GUID-BC3E6CD0-4678-36F6-B4D3-AEE4C6672AAE.html#GUID-BC3E6CD0-4678-36F6-B4D3-AEE4C6672AAE">CFreeTimerWindowAnim</a> or <a class="xref" href="GUID-D49CF183-BD61-3E3E-A77F-C63845E6F0DF.html#GUID-D49CF183-BD61-3E3E-A77F-C63845E6F0DF">CSpriteAnim</a>, depending on whether the animation is to draw to a sprite or a window, rather than directly from this class.</p>
<p class="p">The derived class is constructed in the DLL factory class <a class="xref" href="GUID-9E598CDA-6483-3AE3-ABFF-0F701A47AB84.html#GUID-02031921-85A2-3EC8-85C5-2C9548087395">CAnimDll::CreateInstanceL()</a> function.</p>
<p class="p">The operation to perform an animation step is called by the window server on a timer. The timing properties are set through an <a class="xref" href="GUID-FFE76181-A701-374B-82AA-CEACC5856E91.html#GUID-FFE76181-A701-374B-82AA-CEACC5856E91">MAnimGeneralFunctions</a> member, which also provides other utility functions.</p>
</div>
<h2 class="sectiontitle">Member Attribute Documentation</h2><div class="topic reference apiRef apiValue cxxVariable nested1" id="GUID-84AC5A03-BDA6-3282-92D3-9CE06AF02F90"><a name="GUID-84AC5A03-BDA6-3282-92D3-9CE06AF02F90"><!-- --></a>
<h3 class="sectiontitle">iFunctions</h3>
<div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FFE76181-A701-374B-82AA-CEACC5856E91.html">MAnimGeneralFunctions</a> *</td><td>iFunctions</td><td>[protected]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Pointer to a class containing functions implemented by the window server.</p>
<p class="p">These are available to any <a class="xref" href="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3.html#GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3">CAnim</a> derived class.</p>
<p class="p">Note that this value is automatically set for you by the animation framework. You do not need to assign a value to this pointer.   </p>
</div>
</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-3207DDE3-CE9A-3F90-958A-736130F37A7E"><a name="GUID-3207DDE3-CE9A-3F90-958A-736130F37A7E"><!-- --></a>
<a name="GUID-E19D8143-EF2E-3CDC-AB19-50E86185E008"><!-- --></a><h3 class="sectiontitle">Animate ( TDateTime * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>Animate</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-13A9DD2B-8ABC-3D62-B54E-4F5DD5B9228B.html">TDateTime</a> *</td><td><span class="parameter">aDateTime</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Main animation function, called by the window server.</p>
<p class="p">The drawing code which implements a given animation should be provided here.</p>
<p class="p">This function is called at a frequency determined by the SetSync() helper function. Note that if sync is not set, then this function will never be called. This effect can be exploited to use the animation framework, with its server side speed, for what are strictly not animations, e.g. for streaming video images.</p>
<p class="p">The aDateTime parameter will be null if the current time (as determined by the window server) matches the time implied by the sync period, modulo normalisation, otherwise it will contain a valid (non-normalised) time.</p>
<p class="p">Normalisation is to some specified granularity, for example if one minute is specified as the animation frequency, then in effect the window server will decide whether the implied time is correct to the minute, but not to the second.</p>
<p class="p">Implied time is the time implied by the (normalised) actual time of the previous animation call plus the sync interval. For example if the last call was at time 't' and the sync interval is 1 second then if the time at this call is t + 1 second, then actual time and implied time match and the value placed into aDateTime will be NULL.</p>
<p class="p">Cases in which the two may not match include, for example, system time having been reset between animation calls (perhaps British Summer <a class="xref" href="GUID-B81A50BE-2045-3040-A5DD-D5DE03B52FCC.html#GUID-B81A50BE-2045-3040-A5DD-D5DE03B52FCC">Time</a> or other daylight saving time has just come into effect). The intention is that when system time changes, a mechanism is provided to alert the animation code and allow it to reset itself. The assumption is that somewhere in its initialisation code, the animation will have performed a CAnimFunctions utility call to set a base time, which is then implicitly tracked by incrementing by a suitable interval; when aDateTime is non-NULL after a call to <a class="xref" href="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3.html#GUID-3207DDE3-CE9A-3F90-958A-736130F37A7E">Animate()</a>, base time should be reset.</p>
<p class="p">
</p></div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aDateTime</td><td>Null if the current time w.r.t. the window server matches the time implied by the synch period. Otherwise a valid (non-normalised) time.  </td></tr></table></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-0D7C17A5-59CB-3717-999A-3C98AC9CDD72"><a name="GUID-0D7C17A5-59CB-3717-999A-3C98AC9CDD72"><!-- --></a>
<a name="GUID-56D58597-B74C-3055-87C3-3A290A9F0442"><!-- --></a><h3 class="sectiontitle">Command ( TInt, TAny * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>Command</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aOpcode</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td><span class="parameter">aArgs</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Implements client-side initiated commands.</p>
<p class="p">The window server calls this function in response to application calls to the client side command function <a class="xref" href="GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10.html#GUID-F6A9977A-22E7-3FEE-82CC-8F8DF57E3455">RAnim::Command()</a>. The arguments passed to the function by the window server are the same as were used on the client side function call.</p>
<p class="p">Because this function does not return errors, it is not safe for commands which might leave.</p>
<p class="p">
</p><p class="p">See also: <a class="xref" href="GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10.html#GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10">RAnim</a> </p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aOpcode</td><td>Opcode understood by the class  </td></tr><tr class="bg"><td class="parameter">aArgs</td><td>Arguments packaged on the client side, for example as a struct of a type determined by the aOpcode argument. These mirror the aArgs argument passed in to RAnim::Command().  </td></tr></table></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-4454A273-9E6D-3B58-92C6-D2638628FFB2"><a name="GUID-4454A273-9E6D-3B58-92C6-D2638628FFB2"><!-- --></a>
<a name="GUID-6A098964-9230-3C1A-9921-982BD259D6DF"><!-- --></a><h3 class="sectiontitle">CommandReplyL ( TInt, TAny * )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>
<a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
</td><td>CommandReplyL</td><td>(</td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><span class="parameter">aOpcode</span>,</td></tr><tr><td colspan="3"> </td><td><a class="xref xref apiRelation" href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td><span class="parameter">aArgs</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table></div><div class="section section apiDesc section apidesc">
<p class="p">Implements client-side initiated commands, returning a value.</p>
<p class="p">The window server calls this function in response to application calls to the client side command function RAnim::CommandReplyL(). The arguments passed to the function by the window server are the same as were used on the client side function call.</p>
<p class="p">This function returns values to the client side, and should be used to return error codes for commands which might leave.</p>
<p class="p">
</p><p class="p">See also: <a class="xref" href="GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10.html#GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10">RAnim</a> </p>
</div>
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters"><table class="parameters"><tr><th>Parameters</th></tr><tr><td class="parameter">aOpcode</td><td>Opcode understood by the class.  </td></tr><tr class="bg"><td class="parameter">aArgs</td><td>Arguments packaged on the client side, for example as a struct of a type determined by the aOpcode argument. These mirror the aArgs argument passed in to RAnim::CommandReply().  </td></tr></table></div>
<div class="ph ph apiDefNote cxxFunctionReturnDesc section returnsdoc"><dl class="returnsdoc"><dt class="dlterm">Return Value</dt><dd>Value passed back to client side function when this function completes. Typically this would be KErrNone or another of the system-wide error codes. However any value may be returned to the client side. </dd></dl></div>
</div>
</div>
<div class="topic reference apiRef apiOperation cxxFunction nested1" id="GUID-16B8AE30-48D8-3B57-A75D-C9CBDEBCF034"><a name="GUID-16B8AE30-48D8-3B57-A75D-C9CBDEBCF034"><!-- --></a>
<a name="GUID-22DC7BC2-7E04-3CC1-9530-1F2526F1134F"><!-- --></a><h3 class="sectiontitle">HandleNotification ( const TWsEvent &amp; )</h3>
<div class="body refbody apiDetail apiOperationDetail cxxFunctionDetail section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>HandleNotification</td><td>(</td><td>const <a class="xref xref apiRelation" href="GUID-5D0B1595-1AC7-3C44-AC6B-0EFB5EABCF31.html">TWsEvent</a> &amp;</td><td><span class="parameter"></span></td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section section apiDesc section apidesc">
<div class="ph ph apiDefItem apiDefItem cxxFunctionParameters section parameters">
</div>
</div>
</div></div><div class="footer"><hr /><div class="copy">Â© Nokia 2005.</div></div>
</div></div></body>
<!-- Mirrored from devlib.symbian.slions.net/belle/GUID-C6E5F800-0637-419E-8FE5-1EBB40E725AA/GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 04:22:36 GMT -->
</html>