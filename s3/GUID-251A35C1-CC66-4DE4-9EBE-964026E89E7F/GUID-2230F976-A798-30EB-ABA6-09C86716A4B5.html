<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">

<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-2230F976-A798-30EB-ABA6-09C86716A4B5.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 08:02:09 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2011"/>
<meta name="DC.rights.owner" content="(C) Copyright 2011"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MDataSource"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-2230F976-A798-30EB-ABA6-09C86716A4B5"/>
<link rel="stylesheet" type="text/css" href="css/commonltr.css"/>
<title>MDataSource</title>
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="css/nokiacxxref.css"/><link href="css/html.css" rel="stylesheet" type="text/css"/><link href="css/style.css" rel="stylesheet" type="text/css"/><link href="css/nwg.css" rel="stylesheet" type="text/css"/><link href="css/eclipse.css" rel="stylesheet" type="text/css"/></head>
<body id="GUID-2230F976-A798-30EB-ABA6-09C86716A4B5"><a name="GUID-2230F976-A798-30EB-ABA6-09C86716A4B5"><!-- --></a><div class="body"><div class="contentLeft prTxt">

	<h1 class="sectiontitle">MDataSource Class Reference</h1>
	
	<div class="section include"><p>#include 
            
                    &lt;mmf/server/mmfdatasource.h&gt;
                </p></div>
<div class="section linkagainst" id="GUID-2230F976-A798-30EB-ABA6-09C86716A4B5__linkagainst"><a name="GUID-2230F976-A798-30EB-ABA6-09C86716A4B5__linkagainst"><!-- --></a><p>Link against: AdvancedAudioController.lib</p></div>
<div class="section signature"><table class="signature"><tr><td>class MDataSource</td></tr></table></div><div class="section member-index"><table class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">virtual </td><td><a href="#GUID-BB363812-15DD-331D-9B29-785416ADB2D3">~MDataSource</a>()</td></tr><tr class="bg"><td align="right" class="code">pure virtual void</td><td><a href="#GUID-4D90F2A0-9409-3DEA-88FB-0A2EE193378D">BufferEmptiedL</a>(<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *)</td></tr><tr><td align="right" class="code">pure virtual 
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-F8E0C364-A401-3EDF-B46B-55286FCEF011">CanCreateSourceBuffer</a>()</td></tr><tr class="bg"><td align="right" class="code">pure virtual 
					<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td><a href="#GUID-15394DBF-155B-3E84-8C98-54FD6A40D8A1">CreateSourceBufferL</a>(<a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;)</td></tr><tr><td align="right" class="code">virtual 
					<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td><a href="#GUID-62069BEB-4010-3415-AF33-A68A656D0EB4">CreateSourceBufferL</a>(<a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a>, <a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">virtual 
					<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>
				</td><td><a href="#GUID-7EA86B1B-3215-3449-82E3-D53C637D7003">DataSourceType</a>()</td></tr><tr><td align="right" class="code">pure virtual void</td><td><a href="#GUID-18796313-34CD-3104-AAB2-32E4BB25ECF7">FillBufferL</a>(<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *, <a href="GUID-708A7583-5C55-3FE1-8238-974C8821588D.html">MDataSink</a> *, <a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a>)</td></tr><tr class="bg"><td align="right" class="code">virtual void</td><td><a href="#GUID-91860101-3E3F-3797-9793-1CFE523A0428">NegotiateSourceL</a>(<a href="GUID-708A7583-5C55-3FE1-8238-974C8821588D.html">MDataSink</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-2230F976-A798-30EB-ABA6-09C86716A4B5.html">MDataSource</a> *</td><td><a href="#GUID-9B969FA4-024F-30CC-B9CC-3837351A0C9D">NewSourceL</a>(<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>, const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">virtual 
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-AF0FDB2E-F68A-380A-ACD2-AE8396B49772">SetSourceDataTypeCode</a>(<a href="GUID-691F7FFC-D026-30D5-B08D-A06915272C92.html">TFourCC</a>, <a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a>)</td></tr><tr><td align="right" class="code">virtual void</td><td><a href="#GUID-19D5CBFD-59EB-3939-8AB0-F441AEDFE3DA">SetSourcePrioritySettings</a>(const <a href="GUID-AA73C7C3-5874-34D1-8879-597B0900E9F3.html">TMMFPrioritySettings</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">virtual void</td><td><a href="#GUID-94BC2CBF-79B4-3AAB-B788-1B330C4537B6">SourceCustomCommand</a>(<a href="GUID-3AF511EA-1E66-3286-9FD0-B90EC22BFAC1.html">TMMFMessage</a> &amp;)</td></tr><tr><td align="right" class="code">pure virtual 
					<a href="GUID-691F7FFC-D026-30D5-B08D-A06915272C92.html">TFourCC</a>
				</td><td><a href="#GUID-7D236CBD-0A95-319B-B4EE-B868CFBD6431">SourceDataTypeCode</a>(<a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a>)</td></tr><tr class="bg"><td align="right" class="code">virtual void</td><td><a href="#GUID-91ED949B-9440-3E31-AAA5-D132F3F6DDC4">SourcePauseL</a>()</td></tr><tr><td align="right" class="code">virtual void</td><td><a href="#GUID-2078F38C-DE70-3D20-BC0A-CF522AD9F39C">SourcePlayL</a>()</td></tr><tr class="bg"><td align="right" class="code">virtual void</td><td><a href="#GUID-C12C9339-F515-3A60-9CA1-DDB4F9891D71">SourcePrimeL</a>()</td></tr><tr><td align="right" class="code">virtual 
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-CD7A8357-50F9-3E10-9AC8-6D962C30C014">SourceSampleConvert</a>()</td></tr><tr class="bg"><td align="right" class="code">virtual void</td><td><a href="#GUID-A1A741E8-A492-3953-BD85-AFBE638F8146">SourceStopL</a>()</td></tr><tr><td align="right" class="code">virtual void</td><td><a href="#GUID-5E688021-967D-39B3-B478-995BDDC63A4D">SourceThreadLogoff</a>()</td></tr><tr class="bg"><td align="right" class="code">virtual 
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-B6B7EB2D-5E08-3422-93AB-EC17FCC6E37B">SourceThreadLogon</a>(<a href="GUID-8512F793-107A-3166-A62F-750696D942CE.html">MAsyncEventHandler</a> &amp;)</td></tr></tbody></table><table class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-2EEF2F0D-CA5C-35FF-A39F-7F5A3EBA4E98">MDataSource</a>(<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>)</td></tr><tr class="bg"><td align="right" class="code">pure virtual void</td><td><a href="#GUID-8C785CAC-6873-3DB2-9B7E-9481A94C2B14">ConstructSourceL</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr></tbody></table></div><div class="section apidesc"><h2 class="sectiontitle">Detailed Description</h2>
			<p>Abstract class representing a data source. </p>

		</div>
<h2 class="sectiontitle">Constructor &amp; Destructor Documentation</h2><div class="nested1" id="GUID-2EEF2F0D-CA5C-35FF-A39F-7F5A3EBA4E98"><a name="GUID-2EEF2F0D-CA5C-35FF-A39F-7F5A3EBA4E98"><!-- --></a>
		<a name="GUID-FE943995-C874-3A6D-B4D8-171E4EC8E665"><!----></a><h3 class="sectiontitle">MDataSource ( TUid )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>MDataSource</td><td>(</td><td><a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a></td><td><span class="parameter">aType</span></td><td>)</td><td>[protected, inline]</td></tr></table></div><div class="section apidesc">
				<p>Protected constructor. </p>

			</div>
<div class="section parameters"/>
</div>

	</div>
<div class="nested1" id="GUID-BB363812-15DD-331D-9B29-785416ADB2D3"><a name="GUID-BB363812-15DD-331D-9B29-785416ADB2D3"><!-- --></a>
		<h3 class="sectiontitle">~MDataSource (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>~MDataSource</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Destructor. </p>

			</div>
</div>

	</div>
<h2 class="sectiontitle">Member Function Documentation</h2><div class="nested1" id="GUID-4D90F2A0-9409-3DEA-88FB-0A2EE193378D"><a name="GUID-4D90F2A0-9409-3DEA-88FB-0A2EE193378D"><!-- --></a>
		<a name="GUID-48568E16-4AB4-3C76-A81B-ABE2A8ECF6A2"><!----></a><h3 class="sectiontitle">BufferEmptiedL ( CMMFBuffer * )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>BufferEmptiedL</td><td>(</td><td><a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td><span class="parameter">aBuffer</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function called by a data sink to pass back an emptied buffer to the source.</p>

				<p>This is a pure virtual function that each derived class must implement. This method is used as the callback when the data source actively requests a consumer ie. a data sink to empty a buffer by calling the data sinks EmptyBufferL. When the data source gets this callback it knows that the buffer has been emptied and can be reused.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aBuffer</td><td>The buffer that has been emptied by a data sink and is now available for reuse.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-F8E0C364-A401-3EDF-B46B-55286FCEF011"><a name="GUID-F8E0C364-A401-3EDF-B46B-55286FCEF011"><!-- --></a>
		<h3 class="sectiontitle">CanCreateSourceBuffer (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>CanCreateSourceBuffer</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>
					<a href="GUID-8156C88C-5FEF-3BD5-91CF-E020B0A8207A.html#GUID-0BED6151-7AB5-3316-B9F0-46B19899E972">Deprecated</a>
				</p>

				<p>Function to indicate whether the data source can create a buffer.</p>

				<p>This is a pure virtual function that each derived class must implement.</p>

				<p/>

			</div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A boolean indicating if the data source can create a buffer. ETrue if it can otherwise EFalse. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-8C785CAC-6873-3DB2-9B7E-9481A94C2B14"><a name="GUID-8C785CAC-6873-3DB2-9B7E-9481A94C2B14"><!-- --></a>
		<a name="GUID-3B28E1FD-F785-370E-A406-87E80B1B59DE"><!----></a><h3 class="sectiontitle">ConstructSourceL ( const TDesC8 &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>ConstructSourceL</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td><span class="parameter">aInitData</span></td><td>)</td><td>[protected, pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Performs any source construction dependant on the source construction initialisation data aInitData.</p>

				<p>This is a pure virtual function that a derrived data source must implement</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aInitData</td><td>The source specific initialisation data required for source construction.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-15394DBF-155B-3E84-8C98-54FD6A40D8A1"><a name="GUID-15394DBF-155B-3E84-8C98-54FD6A40D8A1"><!-- --></a>
		<a name="GUID-047464BF-66A3-3B42-ACB3-528F4098FA6F"><!----></a><h3 class="sectiontitle">CreateSourceBufferL ( TMediaId, TBool &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td>CreateSourceBufferL</td><td>(</td><td><a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a></td><td><span class="parameter">aMediaId</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;</td><td><span class="parameter">aReference</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>
					<a href="GUID-8156C88C-5FEF-3BD5-91CF-E020B0A8207A.html#GUID-A9DD1A78-6F98-3728-951C-23BF361E1986">Deprecated</a>
				</p>

				<p>Returns a buffer created by the data source</p>

				<p>This is a pure virtual function that each derived class must implement.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aMediaId</td><td>This identifies the type of media eg. audio or video and the stream ID. This parameter is required in cases where the source can supply data of more than one media type and/or multiple strams of data eg a multimedia file.  </td></tr><tr class="bg"><td class="parameter">aReference</td><td>This must be written to by the method to indicate whether the created buffer is a 'reference' buffer. A 'reference' buffer is a buffer that is owned by the source and should be used in preference to the sink buffer provided the sink buffer is also not a reference buffer. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A pointer to the created buffer. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-62069BEB-4010-3415-AF33-A68A656D0EB4"><a name="GUID-62069BEB-4010-3415-AF33-A68A656D0EB4"><!-- --></a>
		<h3 class="sectiontitle">CreateSourceBufferL ( TMediaId, CMMFBuffer &amp;, TBool &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td>CreateSourceBufferL</td><td>(</td><td><a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a></td><td><span class="parameter">aMediaId</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> &amp;</td><td><span class="parameter">aSinkBuffer</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;</td><td><span class="parameter">aReference</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>
					<a href="GUID-8156C88C-5FEF-3BD5-91CF-E020B0A8207A.html#GUID-27C98214-5558-3BCB-956C-E26C72ECB340">Deprecated</a>
				</p>

				<p>Returns a buffer created by the data source.</p>

				<p>This is a virtual function that a derived class can implement. This can be used in preference to the above CreateSourceBufferL method in cases where the source buffer creation has a dependancy on the sink buffer.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aMediaId</td><td>This identifies the type of media eg. audio or video and the stream ID. This parameter is required in cases where the source can supply data of more than one media type and/or multiple strams of data eg a multimedia file  </td></tr><tr class="bg"><td class="parameter">aSinkBuffer</td><td>The sink buffer the nature of which may influence the creation of the source buffer.  </td></tr><tr><td class="parameter">aReference</td><td>This must be written to by the method to indicate whether the created buffer is a 'reference' buffer. A 'reference' buffer is a buffer that is owned by the source and should be used in preference to the sink buffer provided the sink buffer is not a reference buffer. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A pointer to the created buffer. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-7EA86B1B-3215-3449-82E3-D53C637D7003"><a name="GUID-7EA86B1B-3215-3449-82E3-D53C637D7003"><!-- --></a>
		<h3 class="sectiontitle">DataSourceType (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>
				</td><td>DataSourceType</td><td>(</td><td>)</td><td>const [inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Returns the UID identifying the type of data source.</p>

				<p/>

			</div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">The UID identifying the type of data source. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-18796313-34CD-3104-AAB2-32E4BB25ECF7"><a name="GUID-18796313-34CD-3104-AAB2-32E4BB25ECF7"><!-- --></a>
		<a name="GUID-F9457D80-0FA4-3133-BB70-1AEF18AEEC81"><!----></a><h3 class="sectiontitle">FillBufferL ( CMMFBuffer *, MDataSink *, TMediaId )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>FillBufferL</td><td>(</td><td><a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html">CMMFBuffer</a> *</td><td><span class="parameter">aBuffer</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-708A7583-5C55-3FE1-8238-974C8821588D.html">MDataSink</a> *</td><td><span class="parameter">aConsumer</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a></td><td><span class="parameter">aMediaId</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function called by a <a href="GUID-708A7583-5C55-3FE1-8238-974C8821588D.html#GUID-708A7583-5C55-3FE1-8238-974C8821588D">MDataSink</a> to request the data source to fill aBuffer with data.</p>

				<p>This is a pure virtual function that each derived class must implement. This method is used when a data source is passively waiting for requests from a consumer ie. a data sink to fill a buffer. The data source must call the BufferFilledL member on aConsumer when it has filled the buffer with data. The data source can either make this callback synchronously or asynchronously.</p>

				<p>The format should read the frame number of the buffer via the buffer's <a href="GUID-9A7A83ED-592B-3A0C-BABB-3B90099BCF7C.html#GUID-530E9112-D08E-35B2-B26F-9E48CDADBC60">CMMFBuffer::FrameNumber()</a> function. From this, the format should be able to determine the actual position of the data on the data source. The technique here depends on the nature of the format. For a linear audio format, the position can be obtained by a simple calculation of the frame size, the header size and where appropriate the datatype.</p>

				<p>For non-linear formats, either an index table of frame number and location will need to be created in the NewL() or some form of approximating algorithm will be required. Some formats have an index table as part of the format eg. AVI. If no random access is required then no index table is required, the format can keep track of the current read position and increment it on each access, and reset it if the frame number is reset to 0 or 1. Given that for non-linear ie. variable bit rate formats, the size of the data read may vary from frame to frame, then the format should either set the request size of the buffer for the required frame or call the source's ReadBufferL() (either <a href="GUID-815970B5-302C-317E-8CAF-4A6589D25694.html#GUID-7E80CCBD-30EA-3C7B-A579-4646BE6CD5AF">CMMFClip::ReadBufferL()</a>, CMMFDescriptor ReadBufferL() or <a href="GUID-9914ABBD-B15F-3CDB-9F4E-1C9002A30269.html#GUID-40C85460-24D3-3FCC-A5A2-1508FAC86933">CMMFFile::ReadBufferL()</a>) function that takes the aLength parameter.</p>

				<p>It is the responsibility of the format decode to determine the size and position of the source data for each frame. For linear audio formats, the format decode should fill the buffer up to its maximum length. For multimedia formats e.g. mp4, AVI etc, the format decode is effectively acting as a demultiplexor, and must obtain the appropriate data from the source depending on the aMediaId.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aBuffer</td><td>The buffer that needs filling with data.  </td></tr><tr class="bg"><td class="parameter">aConsumer</td><td>The data sink that consumes the data. The data source needs this to make the BufferFilledL callback on aConsumer when the data source has completed filling the aBuffer.  </td></tr><tr><td class="parameter">aMediaId</td><td>This identifies the type of media eg. audio or video and the stream ID. This parameter is required in cases where the source can supply data of more than one media type and/or multiple strams of data eg. a multimedia file.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-91860101-3E3F-3797-9793-1CFE523A0428"><a name="GUID-91860101-3E3F-3797-9793-1CFE523A0428"><!-- --></a>
		<a name="GUID-1AD0F9E7-A7CC-3E81-8E03-D6E694767676"><!----></a><h3 class="sectiontitle">NegotiateSourceL ( MDataSink &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>NegotiateSourceL</td><td>(</td><td><a href="GUID-708A7583-5C55-3FE1-8238-974C8821588D.html">MDataSink</a> &amp;</td><td><span class="parameter">aDataSink</span></td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to allow the data source to negotiate with a data sink</p>

				<p>This method is required in cases where the settings of data source are dependant on those of a data sink. This is a virtual function that a derrived data source can implement.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aDataSink</td><td>The data sink whose settings can affect the data source.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-9B969FA4-024F-30CC-B9CC-3837351A0C9D"><a name="GUID-9B969FA4-024F-30CC-B9CC-3837351A0C9D"><!-- --></a>
		<a name="GUID-284ECE44-65BF-343A-A1D1-2B9BA0F5BE3F"><!----></a><h3 class="sectiontitle">NewSourceL ( TUid, const TDesC8 &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-2230F976-A798-30EB-ABA6-09C86716A4B5.html">MDataSource</a> *</td><td>NewSourceL</td><td>(</td><td><a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a></td><td><span class="parameter">aImplementationUid</span>,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td><span class="parameter">aInitData</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static, inline]</td></tr></table></div><div class="section apidesc">
				<p>Instantiates a data source.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aImplementationUid</td><td>The UID identifying the data source to be instantiated.  </td></tr><tr class="bg"><td class="parameter">aInitData</td><td>The source specific initialisation data required for source construction. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">The instantiated data source. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-AF0FDB2E-F68A-380A-ACD2-AE8396B49772"><a name="GUID-AF0FDB2E-F68A-380A-ACD2-AE8396B49772"><!-- --></a>
		<a name="GUID-7EDAC41D-630F-39A4-97B6-06384E214592"><!----></a><h3 class="sectiontitle">SetSourceDataTypeCode ( TFourCC, TMediaId )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>SetSourceDataTypeCode</td><td>(</td><td><a href="GUID-691F7FFC-D026-30D5-B08D-A06915272C92.html">TFourCC</a></td><td><span class="parameter">aSourceFourCC</span>,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a></td><td><span class="parameter">aMediaId</span></td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Sets the data type as a fourCC code for the data source.</p>

				<p>This is a virtual function that each derived class can implement if the data source supports the ability to have its data type set.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aSourceFourCC</td><td>This specifies the data type as a fourCC code to set the source to.  </td></tr><tr class="bg"><td class="parameter">aMediaId</td><td>This identifies the type of media eg. audio or video and the stream ID. This parameter is required in cases where the source can supply data of more than one media type and/or multiple strams of data eg a multimedia file. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">KErrNone if successful, KErrNotSupported if the source does not support having it's data type set, otherwise a system wide error code. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-19D5CBFD-59EB-3939-8AB0-F441AEDFE3DA"><a name="GUID-19D5CBFD-59EB-3939-8AB0-F441AEDFE3DA"><!-- --></a>
		<a name="GUID-71972EC3-9389-3893-A998-482C8A9B537B"><!----></a><h3 class="sectiontitle">SetSourcePrioritySettings ( const TMMFPrioritySettings &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SetSourcePrioritySettings</td><td>(</td><td>const <a href="GUID-AA73C7C3-5874-34D1-8879-597B0900E9F3.html">TMMFPrioritySettings</a> &amp;</td><td><span class="parameter">aPrioritySettings</span></td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to set the source priority settings.</p>

				<p>This is a virtual function that a derrived data source can implement if a priority mechanism is required to arbitrate between multiple clients trying to access the same resource.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aPrioritySettings</td><td>The source priority settings.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-94BC2CBF-79B4-3AAB-B788-1B330C4537B6"><a name="GUID-94BC2CBF-79B4-3AAB-B788-1B330C4537B6"><!-- --></a>
		<a name="GUID-A8D195EE-795A-3EBE-A2EC-0B0321D95DBD"><!----></a><h3 class="sectiontitle">SourceCustomCommand ( TMMFMessage &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SourceCustomCommand</td><td>(</td><td><a href="GUID-3AF511EA-1E66-3286-9FD0-B90EC22BFAC1.html">TMMFMessage</a> &amp;</td><td><span class="parameter">aMessage</span></td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to call a source specific custom command.</p>

				<p>This is a virtual function that a derrived data source can implement if it implements any custom commands.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aMessage</td><td>The message specifying the custom command.  </td></tr></table></div>
</div>

	</div>
<div class="nested1" id="GUID-7D236CBD-0A95-319B-B4EE-B868CFBD6431"><a name="GUID-7D236CBD-0A95-319B-B4EE-B868CFBD6431"><!-- --></a>
		<a name="GUID-FBAA4A85-0481-32A8-9ADE-325DBA8F28C8"><!----></a><h3 class="sectiontitle">SourceDataTypeCode ( TMediaId )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-691F7FFC-D026-30D5-B08D-A06915272C92.html">TFourCC</a>
				</td><td>SourceDataTypeCode</td><td>(</td><td><a href="GUID-1AE974A9-FDD7-38BA-8ED7-7E38085E4B42.html">TMediaId</a></td><td><span class="parameter">aMediaId</span></td><td>)</td><td>[pure virtual]</td></tr></table></div><div class="section apidesc">
				<p>Returns the data type as a fourCC code of the data source.</p>

				<p>This is a pure virtual function that each derrived class must implement.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aMediaId</td><td>This identifies the type of media eg. audio or video and the stream ID. This parameter is required in cases where the source can supply data of more than one media type and/or multiple streams of data. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">The fourCC code identifying the source datatype for the specified aMediaId. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-91ED949B-9440-3E31-AAA5-D132F3F6DDC4"><a name="GUID-91ED949B-9440-3E31-AAA5-D132F3F6DDC4"><!-- --></a>
		<h3 class="sectiontitle">SourcePauseL (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SourcePauseL</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to 'pause' the data source.</p>

				<p>This is a virtual function that a derrived data source can implement if any data source specific action is required to 'pause' </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-2078F38C-DE70-3D20-BC0A-CF522AD9F39C"><a name="GUID-2078F38C-DE70-3D20-BC0A-CF522AD9F39C"><!-- --></a>
		<h3 class="sectiontitle">SourcePlayL (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SourcePlayL</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to 'play' the data source.</p>

				<p>This is a virtual function that a derrived data source can implement if any data source specific action is required prior to 'playing' ie. the start of data transfer. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-C12C9339-F515-3A60-9CA1-DDB4F9891D71"><a name="GUID-C12C9339-F515-3A60-9CA1-DDB4F9891D71"><!-- --></a>
		<h3 class="sectiontitle">SourcePrimeL (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SourcePrimeL</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to 'prime' the data source.</p>

				<p>This is a virtual function that a derrived data source can implement if any data source specific 'priming' is required. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-CD7A8357-50F9-3E10-9AC8-6D962C30C014"><a name="GUID-CD7A8357-50F9-3E10-9AC8-6D962C30C014"><!-- --></a>
		<h3 class="sectiontitle">SourceSampleConvert (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>SourceSampleConvert</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Indicates whether the data source supports sample rate conversion.</p>

				<p>This is a virtual function that a derived class can implement.</p>

				<p/>

			</div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">A boolean indicating if the data source can perform a sample rate conversion. ETrue if it can otherwise EFalse. </span></p></div>
</div>

	</div>
<div class="nested1" id="GUID-A1A741E8-A492-3953-BD85-AFBE638F8146"><a name="GUID-A1A741E8-A492-3953-BD85-AFBE638F8146"><!-- --></a>
		<h3 class="sectiontitle">SourceStopL (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SourceStopL</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to 'stop' the data source.</p>

				<p>This is a virtual function that a derrived data source can implement if any data source specific action is required to 'stop'. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-5E688021-967D-39B3-B478-995BDDC63A4D"><a name="GUID-5E688021-967D-39B3-B478-995BDDC63A4D"><!-- --></a>
		<h3 class="sectiontitle">SourceThreadLogoff (  )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>void</td><td>SourceThreadLogoff</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to 'logoff' the data source from the same thread that source supplies data in.</p>

				<p>This method may be required as the thread that the data source is deleted in may not be the same thread that the data transfer took place in. Therefore any thread specific releasing of resources needs to be performed in the SourceThreadLogoff rather than in the destructor.</p>

				<p>This is a virtual function that a derrived data source can implement if any thread specific releasing of resources is required. </p>

			</div>
</div>

	</div>
<div class="nested1" id="GUID-B6B7EB2D-5E08-3422-93AB-EC17FCC6E37B"><a name="GUID-B6B7EB2D-5E08-3422-93AB-EC17FCC6E37B"><!-- --></a>
		<a name="GUID-ABDE0CD2-2FED-34A5-991C-10F7C998D377"><!----></a><h3 class="sectiontitle">SourceThreadLogon ( MAsyncEventHandler &amp; )</h3>
		
		<div class="section functiondetail"><div class="section signature"><table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>SourceThreadLogon</td><td>(</td><td><a href="GUID-8512F793-107A-3166-A62F-750696D942CE.html">MAsyncEventHandler</a> &amp;</td><td><span class="parameter">aEventHandler</span></td><td>)</td><td>[inline, virtual]</td></tr></table></div><div class="section apidesc">
				<p>Function to 'logon' the data source to the same thread that source will be supplying data in.</p>

				<p>This method may be required as the thread that the data source was created in is not always the same thread that the data transfer will take place in. Therefore any thread specific initialisation needs to be performed in the SourceThreadLogon rather than in the creation of the data source.</p>

				<p>This is a virtual function that a derrived data source can implement if any thread specific initialisation is required and/or the data source can create any asynchronous events.</p>

				<p/>

			</div>
<div class="section parameters"><table class="parameters"><thead><th>Parameter</th><th>Description</th></thead><tr><td class="parameter">aEventHandler</td><td>This is an MAsyncEventHandler to handle asynchronous events that occur during the transfer of multimedia data. The event handler must be in the same thread as the data transfer thread. Hence the reason it is passed in the SourceThreadLogon as opposed to say the constructor. </td></tr></table></div>
<div class="section returnsdoc"><p><span class="returnsdoclabel">Returns: </span><span class="returnsdocvalue">An error code indicating if the function call was successful. KErrNone on success, otherwise another of the system-wide error codes. </span></p></div>
</div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</div></div><div class="footer"><hr/><div class="copy">Â© Nokia 2011.</div></div>
</body>
<!-- Mirrored from devlib.symbian.slions.net/s3/GUID-251A35C1-CC66-4DE4-9EBE-964026E89E7F/GUID-2230F976-A798-30EB-ABA6-09C86716A4B5.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 27 Mar 2020 08:02:09 GMT -->
</html>